<nav aria-label="Page navigation">
  {% if total % per_page == 0 %}
  {% set end = (total / per_page)|int %}
  {% else %}
  {% set end = ((total / per_page) + 1)|int %}
  {% endif %}

  {% set params = request.params.items() %}
  {% set controller = 'ckanext.calendar.controllers.calendar:CalendarController' %}
  {% set action = 'event_index' %}

  {% if end > 1 %}
  {# Only show pagination if there are more than two pages of results. #}
  <ul class="pagination">
    {% if current != 1 %}<li><a href="{{ h.calendar_get_current_url(current - 1, params, controller, action, exclude_param='page') }}" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>{% endif %}
    {% for index in range(1, end+1) %}
    <li {% if index == current %} class="active"{% endif %}><a href="{{ h.calendar_get_current_url(index, params, controller, action, exclude_param='page') }}">{{ index }}</a></li>
    {% endfor %}
    {% if current < end %}<li><a href="{{ h.calendar_get_current_url(current + 1, params, controller, action, exclude_param='page') }}" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>{% endif %}
  </ul>
  {% endif %}
</nav>